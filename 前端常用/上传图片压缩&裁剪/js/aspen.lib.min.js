"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aspenLib={};aspenLib.h5PopClass={getBody:document.querySelectorAll("body")[0],init:function(e){var t,n=this;void 0!==e&&"object"==(void 0===e?"undefined":_typeof(e))&&n.isMobile(function(){clearTimeout(t),t=setTimeout(function(){n.popMainRun(e),n.bindEvent(e)},100)})},isMobile:function(e){var t=this,n=window.navigator.userAgent,a=/Android|HTC/i.test(n),o=!a&&/iPad/i.test(n),i=!a&&/iPod|iPhone/i.test(n),s=o||i;if(!document.addEventListener||!s&&!a)return!1;e.call(this),document.addEventListener("DOMContentLoaded",function(){t.getBody.classList.add("mobile"),s?t.getBody.classList.add("ios"):a&&t.getBody.classList.add("android")},!1)},popMainRun:function(e){var t=this,n=document.getElementById("h5PopMasks");if(!document.getElementById("h5PopMainEle")&&!n){var a=document.createElement("div"),o=document.createElement("div");o.className="h5pop-mask",o.id="h5PopMasks",a.className="h5pop-main clearfix",a.id="h5PopMainEle",void 0!==e.isHideClose&&1==e.isHideClose?void 0!==e.cancelBtn&&""!=e.cancelBtn&&void 0!==e.confirmBtn&&""!=e.confirmBtn?a.innerHTML='<h3 class="h5tips-title">'+e.title+'</h3><div class="h5pop-content clearfix">'+e.tipTxt+'</div><div class="h5pop-footer"><a type="button" class="h5pop-cancel" href="javascript:;">'+e.cancelBtn+'</a><a type="button" class="h5pop-confirm" href="javascript:;">'+e.confirmBtn+"</a></div>":void 0===e.cancelBtn&&void 0!==e.confirmBtn?a.innerHTML='<h3 class="h5tips-title">'+e.title+'</h3><div class="h5pop-content clearfix">'+e.tipTxt+'</div><div class="h5pop-footer"><a type="button" class="h5pop-confirm" href="javascript:;">'+e.confirmBtn+"</a></div>":void 0===e.confirmBtn&&void 0!==e.cancelBtn?a.innerHTML='<h3 class="h5tips-title">'+e.title+'</h3><div class="h5pop-content clearfix">'+e.tipTxt+'</div><div class="h5pop-footer"><a type="button" class="h5pop-cancel" href="javascript:;">'+e.cancelBtn+"</a></div>":void 0===e.cancelBtn&&void 0===e.confirmBtn?a.innerHTML='<h3 class="h5tips-title">'+e.title+'</h3><div class="h5pop-content clearfix">'+e.tipTxt+'</div><div class="h5pop-footer"></div>':a.innerHTML='<h3 class="h5tips-title">'+e.title+'</h3><div class="h5pop-content clearfix">'+e.tipTxt+'</div><div class="h5pop-footer"><a type="button" class="h5pop-cancel" href="javascript:;">取消</a><a type="button" class="h5pop-confirm" href="javascript:;">确认</a></div>':void 0!==e.cancelBtn&&""!=e.cancelBtn&&void 0!==e.confirmBtn&&""!=e.confirmBtn?a.innerHTML='<a href="javascript:;" class="h5pop-close">×</a><h3 class="h5tips-title">'+e.title+'</h3><div class="h5pop-content clearfix">'+e.tipTxt+'</div><div class="h5pop-footer"><a type="button" class="h5pop-cancel" href="javascript:;">'+e.cancelBtn+'</a><a type="button" class="h5pop-confirm" href="javascript:;">'+e.confirmBtn+"</a></div>":void 0===e.cancelBtn&&void 0!==e.confirmBtn?a.innerHTML='<a href="javascript:;" class="h5pop-close">×</a><h3 class="h5tips-title">'+e.title+'</h3><div class="h5pop-content clearfix">'+e.tipTxt+'</div><div class="h5pop-footer"><a type="button" class="h5pop-confirm" href="javascript:;">'+e.confirmBtn+"</a></div>":void 0===e.confirmBtn&&void 0!==e.cancelBtn?a.innerHTML='<a href="javascript:;" class="h5pop-close">×</a><h3 class="h5tips-title">'+e.title+'</h3><div class="h5pop-content clearfix">'+e.tipTxt+'</div><div class="h5pop-footer"><a type="button" class="h5pop-cancel" href="javascript:;">'+e.cancelBtn+"</a></div>":void 0===e.cancelBtn&&void 0===e.confirmBtn?a.innerHTML='<a href="javascript:;" class="h5pop-close">×</a><h3 class="h5tips-title">'+e.title+'</h3><div class="h5pop-content clearfix">'+e.tipTxt+'</div><div class="h5pop-footer"></div>':a.innerHTML='<a href="javascript:;" class="h5pop-close">×</a><h3 class="h5tips-title">'+e.title+'</h3><div class="h5pop-content clearfix">'+e.tipTxt+'</div><div class="h5pop-footer"><a type="button" class="h5pop-cancel" href="javascript:;">取消</a><a type="button" class="h5pop-confirm" href="javascript:;">确认</a></div>',t.getBody.appendChild(a),t.getBody.appendChild(o)}},bindEvent:function(e){var t=this,n=(document,!0);t.getBody.addEventListener("click",function(a){var a=a||window.event,o=a.target||a.srcElement,i=o.className.toLowerCase()?o.className.toLowerCase():o.id;if(1==n){if("h5pop-close"==i)return a.preventDefault(),t.removePop(),void(n=!1);if("h5pop-cancel"==i)return a.preventDefault(),_typeof(e.cancelBtnRun)&&"function"==typeof e.cancelBtnRun&&e.cancelBtnRun(),t.removePop(),void(n=!1);if("h5pop-confirm"==i)return a.preventDefault(),_typeof(e.confirmBtnRun)&&"function"==typeof e.confirmBtnRun&&e.confirmBtnRun(),t.removePop(),void(n=!1)}},!1)},removePop:function(){var e=document.getElementById("h5PopMasks"),t=document.getElementById("h5PopMainEle");return e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t),!1}},aspenLib.h5PopClass.isMobile(function(){}),aspenLib.ajax=function(opts){var defaults={type:"GET",url:"",data:"",dataType:"json",async:!0,cache:!0,contentType:"application/x-www-form-urlencoded;charset=utf-8",param:"",success:function(){},error:function(){}};for(var key in opts)defaults[key]=opts[key];if("object"===_typeof(defaults.data)){var str="";for(var key in defaults.data)str+=key+"="+defaults.data[key]+"&";defaults.data=str.substring(0,str.length-1)}defaults["type "]=defaults.type.toUpperCase(),defaults.cache=defaults.cache?"":"&"+(new Date).getTime(),"GET"===defaults.type&&(defaults.data||defaults.cache)&&(defaults.url+="?"+defaults.data+defaults.cache);var oXhr=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(oXhr.param=defaults.param,oXhr.open(defaults.type,defaults.url,defaults.async),defaults.headers)for(var k in defaults.headers)oXhr.setRequestHeader(k,defaults.headers[k]);"GET"===defaults.type?oXhr.send(null):(oXhr.setRequestHeader("Content-type",defaults.contentType),oXhr.send(defaults.data)),void 0!==defaults.setToken&&"function"==typeof defaults.setToken&&defaults.setToken(oXhr),oXhr.onreadystatechange=function(){if(4===oXhr.readyState)if(200===oXhr.status){if("function"==typeof defaults.success)if("json"==defaults.dataType)try{defaults.success.call(oXhr,eval("("+oXhr.responseText+")"))}catch(e){}else try{defaults.success.call(oXhr,oXhr.responseText)}catch(e){}}else"function"==typeof defaults.error&&defaults.error()}},aspenLib.uploadImg=function(e){if("object"==(void 0===e?"undefined":_typeof(e))){var t=new FormData,n=new XMLHttpRequest;t.append("image",e.ele.files[0]),n.open("post",e.url,!0),n.onreadystatechange=function(t){if(4===n.readyState)if(200===n.status){var t=JSON.parse(n.responseText);"200"==t.status?"function"==typeof e.callback&&e.callback.call(this):aspenLib.tips(t.msg)}else aspenLib.tips("ajax error")},n.send(t)}},aspenLib.isweixin=function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},aspenLib.loadJS=function(e,t,n){var a=document.createElement("script");a.src=e,a.type="text/javascript","after"==t?document.querySelectorAll("body")[0].appendChild(a):document.querySelectorAll("head")[0].appendChild(a),a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,n.call(this))}:a.onload=function(){n.call(this)}};var clearCounDown;aspenLib.countDown=function(e,t){if(void 0!==e&&"object"==(void 0===e?"undefined":_typeof(e))){var n=function n(){clearTimeout(clearCounDown);var o=0,i=0,s=0,r=0,c=parseInt(e.items)?parseInt(e.items):0,l=document.querySelectorAll(e.h.toString()),d=document.querySelectorAll(e.m.toString()),p=document.querySelectorAll(e.s.toString());if(a<=0)return void(t=t.call(this));a--,o=Math.floor(a/86400),i=Math.floor(a/3600-24*o),s=Math.floor(a/60-24*o*60-60*i),r=Math.floor(a-24*o*60*60-60*i*60-60*s),l.length>0&&d.length>0&&p.length>0?(l[c].innerHTML=i<=9?"0"+i:i,d[c].innerHTML=s<=9?"0"+s:s,p[c].innerHTML=r<=9?"0"+r:r):aspenLib.tips("DOM元素不存在！"),clearCounDown=setTimeout(n,1e3)};if(void 0===e.secnum||isNaN(e.secnum))return void aspenLib.tips("参数格式不正确！");var a=Math.abs(e.secnum)||6e3;clearCounDown=setTimeout(n,1e3)}},aspenLib.tips=function(e){if(e&&""!=e){var t=null,n=document.createElement("div");n.id="systemTips",n.innerHTML=e.toString()||"",document.querySelectorAll("body")[0].appendChild(n),t=setTimeout(function(){var e=document.getElementById("systemTips");e.parentNode&&(e.parentNode.removeChild(e),clearTimeout(t))},2e3)}},aspenLib.jsonpAjax=function(e){if(void 0!==e&&"object"==(void 0===e?"undefined":_typeof(e))){window.jsonpCallback=function(n){if(t.parentNode.removeChild(t),"string"==typeof n)try{e.success(JSON.parse(n))}catch(e){}e.success(n)},-1==e.url.indexOf("?")?e.url+="?callback=jsonpCallback":e.url+="&callback=jsonpCallback";var t=document.createElement("script"),n=document.getElementsByTagName("script")[0];t.type="text/javascript",t.async=1,t.src=e.url,t.onerror=function(n){t.parentNode.removeChild(t),e.error(n)},n.parentNode.insertBefore(t,n)}},aspenLib.parents=function(e,t){for(var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e&&!n.call(e,t);)e=e.parentElement;return e},aspenLib.css=function(e,t){if("object"==(void 0===t?"undefined":_typeof(t)))for(var n in t)t[n]&&(e.style[n]=t[n].toString());return e},aspenLib.offsetTop=function(e){for(var t=e.offsetTop,n=e.offsetParent;n;)t+=n.offsetTop,n=n.offsetParent;return t},aspenLib.offsetLeft=function(e){for(var t=e.offsetLeft,n=e.offsetParent;n;)t+=n.offsetLeft,n=n.offsetParent;return t},aspenLib.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},aspenLib.loading={init:function(e){var t=this,e=e||{loadingWrap:"sysWrap",width:200,height:200,margin:"50px auto"};t.DOMReady(function(){t.setLoading(e,function(){t.DOMInserted(e)})})},DOMInserted:function(e){var t=document.getElementById(e.loadingWrap);if(t)for(var n=document.getElementById("loadingImgContent"),a=document.getElementById("#aspenLoading"),o=t.children;1!=o.nodeType;)return void(o.length>0&&t.children.length>1&&(n.parentNode.removeChild(n),a.parentNode.removeChild(a)))},setLoading:function(e,t){var n=document.createElement("div");n.id="loadingImgContent",n.style.width=e.width+"px",n.style.height=e.height+"px",n.style.margin=e.margin,n.innerHTML='<div id="aspenLoading"><div class="subele1"></div><div class="subele2"></div><div class="subele3"></div><div class="subele4"></div><div class="subele5"></div></div>';var a=document.getElementById(e.loadingWrap);a&&(a.style.position="relative",a.appendChild(n),t.call(this))}},aspenLib.removeLoading=function(){var e=document.getElementById("loadingImgContent"),t=document.getElementById("#aspenLoading");e.parentNode&&e.parentNode.removeChild(e),e.parentNode&&t.parentNode.removeChild(t)};